# Local development defaults.
#
# This file contains placeholder credentials/tokens that are sufficient to run
# the stack on your own machine (they are intentionally NOT secure).
#
# For any internet-exposed deployment, replace these values with strong secrets.
# Quick generation helpers:
#   python -c "import secrets; print(secrets.token_urlsafe(32))"
#   openssl rand -hex 32
#
BACKEND_DEV=false
# Note: `compose.yml` overrides this to `0.0.0.0` inside the container.
BACKEND_WEB_HOST='127.0.0.1'
BACKEND_WEB_PORT=1337
BACKEND_WEB_WORKERS=4

POSTGRES_USER='evmbench'
# Local dev database password (OK for localhost only).
POSTGRES_PASSWORD='DO_NOT_USE_ME'
POSTGRES_DB='evmbench'

RABBITMQ_USER='evmbench'
# Local dev RabbitMQ password (OK for localhost only).
RABBITMQ_PASSWORD='DO_NOT_USE_ME'
RABBITMQ_PORT=5672
RABBITMQ_QUEUE='instancer.jobs'

# Service-to-service tokens (used to gate secrets bundle reads/writes).
SECRETS_TOKEN_RO='dev-secret'
SECRETS_TOKEN_WO='dev-secret-wo'
BACKEND_SECRETS_BACKEND='http'
BACKEND_SECRETS_BACKEND_ARGUMENTS='{"url":"http://127.0.0.1:8081","token":"dev-secret-wo"}'

SECRETSVC_HOST='127.0.0.1'
SECRETSVC_PORT=8081
SECRETSVC_WORKERS=1

RESULTSVC_PORT=8083

# OpenAI key handling
# - direct (default): user provides OpenAI key; worker uses it directly
# - proxy (optional): worker receives an encrypted token; oai_proxy decrypts + forwards
BACKEND_OAI_KEY_MODE=direct

# Proxy mode settings (only required when BACKEND_OAI_KEY_MODE=proxy)
# OAI_PROXY_BASE_URL='http://oai.loc:8084'
# OAI_PROXY_AES_KEY='CHANGE_ME_GENERATE_SECRET'

# oai_proxy service settings (only needed when running oai_proxy)
# OAI_PROXY_HOST='127.0.0.1'
# OAI_PROXY_PORT=8084
# OAI_PROXY_WORKERS=1

# vvv when set, openai keys aren't required in backend forms
# BACKEND_STATIC_OAI_KEY=

# vvv when unset, docker backend defaults to (CPU count)*3
# INSTANCER_MAX_CONCURRENT_JOBS=5

# AUTH_BACKEND=github
# AUTH_BACKEND_ARGUMENTS='{"client_id":"client_id","client_secret":"client_secret"}'

# JWT signing key for auth sessions (OK for localhost only).
BACKEND_JWT_SECRET=DO_NOT_USE_ME

# when running with compose.yml, these will be set automatically:
# DATABASE_DSN=postgresql+asyncpg://evmbench:DO_NOT_USE_ME@127.0.0.1:5432/evmbench
# RABBITMQ_DSN=amqp://evmbench:DO_NOT_USE_ME@127.0.0.1:5672/
